@{
    ViewData["Title"] = "Request Details";
}
@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@*<script src="~/js/3.3.1Version/jquery.min.js"></script>*@
@*<script src="~/lib/jquery/dist/jquery.min.js"></script>*@
<script>

    function checkFileSize(element, maxSize, event) {
        var val = $(element).val(); //get file value
        var fileSize = ($(element)[0].files[0].size / 1024 / 1024); //size in MB

        var MAX_FILE_SIZE = 20 * 1024 * 1024; // 20MB
        if (fileSize > MAX_FILE_SIZE) {
            AlertPopup("File Size Should Not Exceed More Than 5MB");// if Maxsize from Model > real file size alert this
            $("#ImageUpload").val("");
        }
        var input = document.getElementById('ImageUpload')
        var output = document.getElementById('SignImageName')
        var result = "";
        result += input.files.item(0).name;
        output.innerHTML = result;
    }
    setTimeout(function () {
        $('#reservationdate1').datetimepicker({
            format: 'DD/MM/YYYY'
        });
        $('#reservationdate7').datetimepicker({
            format: 'DD/MM/YYYY'
        });
        $('#reservationdate4').datetimepicker({
            format: 'DD/MM/YYYY'
        });
        $('#reservationdate5').datetimepicker({
            format: 'DD/MM/YYYY'
        });
    }, 1000);

</script>


<section class="content">
    <div class="row">
        <div class="col-12">
            <!-- general form elements disabled -->
            <div class="card card-primary">
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-6">
                            <h3 class="card-title trn">Request Details</h3>
                        </div>
                        <div class="col-md-6 text-right">
                            <input type="hidden" id="RequestCalibId" value="@Model.Id">
                            <input type="hidden" id="hdntype" value="@Model.TypeOfRequest">
                            <input type="hidden" name="IsNABL" id="IsNABL" value="@Model.IsNABL">
                            <input type="hidden" id="hdnInstrumentId" value="@Model.InstrumentId">
                            <input type="hidden" id="hdnDepartmentId" value='@HttpContextAccessor.HttpContext.Session.GetString("DepartmentId")'>
                            <input type="hidden" id="hdnLanguage" value=''>
                            <input type="hidden" id="CalibFreqDue" value='@Model.CalibFreq'>
                            @* <a href='@Url.Action("Index","Instrument")'><input type="button" class="btn btn-sm btn-default"
                            value="Instrument List"></a> *@
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="trn">Request Number</label>
                                <input type="text" class="form-control" id="NewReqestNo" value="@Model.ReqestNo" disabled>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="trn">Requested Date</label>
                                <input type="text" class="form-control" id="NewRequestDate" value="@Model.RequestDate.ToShortDateString()" disabled>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Instrument Name</label>
                                <input type="text" class="form-control" id="NewInstrumentName" value="@Model.InstrumentName" disabled>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Instrument Serial Number</label>
                                <input type="text" class="form-control" id="NewInstrumentSerialNumber" value="@Model.InstrumentSerialNumber" disabled>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Type Of Request</label>
                                @if (Model.TypeOfRequest == 1)
                                {
                                    <input type="text" class="form-control" id="NewTypeOfRequest" value="New" disabled>
                                }
                                else if (Model.TypeOfRequest == 2)
                                {
                                    <input type="text" class="form-control" id="NewTypeOfRequest" value="Regular" disabled>
                                }
                                else if (Model.TypeOfRequest == 3)
                                {
                                    <input type="text" class="form-control" id="NewTypeOfRequest" value="Recalibration" disabled>
                                }
                                else if (Model.TypeOfReqest == 4)
                                {
                                    <input type="text" class="form-control" id="NewTypeOfRequest" value="UnQuarantine" disabled>
                                }
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Request By</label>
                                <input type="text" class="form-control" id="NewReqestBy" value="@Model.ReqestBy" disabled>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="trn">Range</label>
                                <input type="text" class="form-control" id="NewRange" value="@Model.Range" disabled>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Unit</label>
                                <input type="text" class="form-control" id="NewUnit1" value="@Model.Unit1" disabled>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="trn">LC</label>
                                <input type="text" class="form-control" id="NewLC" value="@Model.LC" disabled>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Unit</label>
                                <input type="text" class="form-control" id="NewUnit2" value="@Model.Unit2" disabled>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="trn">Model/Capacity</label>
                                <input type="text" class="form-control" id="NewTW_Type" value="@Model.Capacity" disabled>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Amount in JPY</label>
                                <input type="text" class="form-control" id="NewUnit3" value="@Model.AmountJPY" disabled>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Make</label>
                                <input type="text" class="form-control" id="NewMake" value="@Model.Make" disabled>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="trn">Equipment Station</label>
                                <select id="EquipmentStation" name="EquipmentStation" class="form-control" disabled>
                                    <option value=" " class="trn">--Select Equipment Station--</option>
                                    @if (Model.EquipmentStation == "Inline")
                                    {
                                        <option value="Inline" selected="true" class="trn">Inline</option>
                                    }
                                    else
                                    {
                                        <option value="Inline" class="trn">Inline</option>
                                    }
                                    @if (Model.EquipmentStation == "Lab")
                                    {
                                        <option value="Lab" selected="true" class="trn">Lab</option>
                                    }
                                    else
                                    {
                                        <option value="Lab" class="trn">Lab</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Comment</label>
                                <input type="text" id="StandardReffered1" name="StandardReffered1" value="@Model.Comment" class="form-control" placeholder="" disabled>
                            </div>
                        </div>
                        @if (Model.TypeOfEquipment == "Internal" || Model.TypeOfEquipment == "内部")
                        {
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="required trn">Applicable for Tool Inventory</label>
                                    <select id="ToolInventory" name="ToolInventory" class="form-control">
                                        <option value="" selected="true" class="trn">--Select Tool Inventory--</option>
                                        @if (Model.ToolInventory == "Yes")
                                        {
                                            <option value="Yes" selected="true" class="trn">Yes</option>
                                        }
                                        else
                                        {
                                            <option value="Yes" class="trn">Yes</option>
                                        }
                                        @if (Model.ToolInventory == "No")
                                        {
                                            <option value="No" selected="true" class="trn">No</option>
                                        }
                                        else
                                        {
                                            <option value="No" class="trn">No</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                                <label class="trn">Type of Instrument</label>
                                <select id="Instrument_Type" name="Instrument_Type" class="form-control" disabled>
                                    @if (Model.Instrument_Type == 1)
                                    {
                                        <option value="1" selected="true" class="trn">Dial</option>
                                    }
                                    else
                                    {
                                        <option value="1" class="trn">Dial</option>
                                    }
                                    @if (Model.Instrument_Type == 2)
                                    {
                                        <option value="2" selected="true" class="trn">Digital</option>
                                    }
                                    else
                                    {
                                        <option value="2" class="trn">Digital</option>
                                    }
                                    @if (Model.Instrument_Type == 3)
                                    {
                                        <option value="3" selected="true" class="trn">Analog</option>
                                    }
                                    else
                                    {
                                        <option value="3" class="trn">Analog</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="trn">Scope</label>
                                <select id="Scope" class="form-control" disabled>
                                    @if (Model.TypeOfEquipment == "Internal" || Model.TypeOfEquipment == "内部")
                                    {
                                        <option value="Internal" class="trn" selected=true>Internal</option>
                                    }
                                    else
                                    {
                                        <option value="Internal" class="trn">Internal</option>
                                    }
                                    @if (Model.TypeOfEquipment == "External" || Model.TypeOfEquipment == "外部の")
                                    {
                                        <option value="External" class="trn" selected=true>External</option>
                                    }
                                    else
                                    {
                                        <option value="External" class="trn">External</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                    </div>
                    @if (Model.TypeOfRequest == 3 && (Model.LabL4 == Convert.ToInt32(HttpContextAccessor.HttpContext.Session.GetString("LoggedId")) && Model.IsLabL4Accepted == null) || (Model.UserL4 == Convert.ToInt32(HttpContextAccessor.HttpContext.Session.GetString("LoggedId")) && Model.IsUserL4Accepted == null))
                    {
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Received By</label>
                                    <input type"text" id="ReceivedBy" class="form-control" value='@HttpContextAccessor.HttpContext.Session.GetString("FirstName") @HttpContextAccessor.HttpContext.Session.GetString("LastName")' disabled>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Received Date</label>
                                    <div class="input-group date" id="reservationdate1" data-target-input="nearest" onchange="$('#ReceivedDate').attr('value',$('#ReceivedDate').val());">
                                        <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate1"
                                               id="ReceivedDate" name="ReceivedDate" value='@DateTime.Now' />
                                        <div class="input-group-append" data-target="#reservationdate1" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3" style="top: 15px;" id="AcceptSection">
                                <!-- text input -->
                                <div class="form-group">
                                    <label class="trn">Accept</label>
                                    <input type="radio" name="NewAcceptReject" value="Accept">
                                </div>
                            </div>
                            <div class="col-sm-3" style="top: 15px;" id="RejectSection">
                                <div class="form-group">
                                    <label class="trn">Reject</label>
                                    <input type="radio" name="NewAcceptReject" value="Reject">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6" style="text-align:right;">
                            <!-- text input -->
                            <div class="form-group">
                                <input type="button" id="submitReasonNewRequest" value="Submit" name="Submit"
                                       class="btn btn-primary trn" onclick="AcceptRejectReCalibrationRequest(language)">
                                <a href='@Url.Action("Request","Tracker")'><input type="button" class="btn btn-default trn" value="Cancel"></a>
                            </div>
                        </div>
                    }
                    @*@if (Convert.ToInt32(HttpContextAccessor.HttpContext.Session.GetString("UserRoleId")) == 2 && ((Model.TypeOfRequest == 1 || Model.TypeOfRequest == 2) && Model.Status == 26) || ((Model.TypeOfRequest == 3 && Model.IsLabL4Accepted == 1 && Model.IsUserL4Accepted == 1) && Model.Status == 26))*@
                    @if ((Convert.ToInt32(HttpContextAccessor.HttpContext.Session.GetString("UserRoleId")) == 2 || Convert.ToInt32(HttpContextAccessor.HttpContext.Session.GetString("UserRoleId")) == 3) && ((Model.TypeOfRequest == 1 || Model.TypeOfRequest == 2 || Model.TypeOfRequest == 3) && Model.Status == 26))
                    {
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Received By</label>
                                    <input type"text" id="ReceivedBy" class="form-control" value='@HttpContextAccessor.HttpContext.Session.GetString("FirstName") @HttpContextAccessor.HttpContext.Session.GetString("LastName")' disabled>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Received Date</label>
                                    <div class="input-group date" id="reservationdate1" data-target-input="nearest" onchange="$('#ReceivedDate').attr('value',$('#ReceivedDate').val());">
                                        <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate1"
                                               id="ReceivedDate" name="ReceivedDate" value='@DateTime.Now' />
                                        <div class="input-group-append" data-target="#reservationdate1" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Tentative Closing Date</label>
                                    <div class="input-group date" id="reservationdate7" data-target-input="nearest" onchange="$('#TentativeCompletionDate').attr('value',$('#TentativeCompletionDate').val());">
                                        <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate7"
                                               id="TentativeCompletionDate" name="TentativeCompletionDate" value="">
                                        <div class="input-group-append" data-target="#reservationdate7" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-3" style="top: 35px;" id="AcceptSection">
                                <!-- text input -->
                                <div class="form-group">
                                    <label class="trn">Accept</label>
                                    <input type="radio" name="NewAcceptReject" value="Accept"
                                           onclick="NewReqEnableReason1()">

                                </div>
                            </div>
                            <div class="col-sm-3" style="top: 35px;" id="RejectSection">
                                <div class="form-group">
                                    <label class="trn">Reject</label>
                                    <input type="radio" name="NewAcceptReject" value="Reject"
                                           onclick="NewReqEnableReason1()">
                                </div>
                            </div>

                        </div>
                    }
                    @if (Model.Status == 27 || Model.Status == 28 || Model.Status == 29 || Model.Status == 30 || Model.Status == 31) @* && (Model.Status == 26 && (Model.TypeOfRequest == 2 || Model.TypeOfRequest == 3))) *@
                    {
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Received By</label>
                                    <input type"text" id="ReceivedBy" class="form-control" value="@Model.ReceivedByName" disabled>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Received Date</label>
                                    <div class="input-group date" id="reservationdate1" data-target-input="nearest" onchange="$('#ReceivedDate').attr('value',$('#ReceivedDate').val());">
                                        <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate1"
                                               id="ReceivedDate" name="ReceivedDate" value='@Model.ReceivedDate' disabled />
                                        <div class="input-group-append" data-target="#reservationdate1" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*<div class="col-sm-6">
                        <div class="form-group">
                        <label class="trn">Instrument Condition</label>
                        <input type"text" id="InstrumentCondition" class="form-control" value="@Model.InstrumentCondition" disabled>
                        </div>
                        </div>*@
                            @*<div class="col-sm-6">
                        <div class="form-group">
                        <label class="trn">Scope</label>
                        <select id="Scope" class="form-control" disabled>
                        @if (Model.Feasiblity == "Internal")
                        {
                        <option value="Internal Instrument" selected=true>Internal Instrument</option>
                        }
                        else
                        {
                        <option value="Internal Instrument">Internal Instrument</option>
                        }
                        @if (Model.Feasiblity == "External Instrument")
                        {
                        <option value="External Instrument" selected=true>External Instrument</option>
                        }
                        else
                        {
                        <option value="External Instrument">External Instrument</option>
                        }
                        </select>
                        </div>
                        </div>*@

                            @* <div class="col-sm-6">
                        <div class="form-group">
                        <label class="required trn">Standard Reffered/Calibration Method</label>
                        <input type="text" id="StandardReffered" name="StandardReffered" value="@Model.StandardReffered"
                        class="form-control" placeholder="" disabled>
                        </div>
                        </div>*@
                            @* <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                        <label class="trn">NABL</label>
                        <select id="ddIsNABL" name="ddIsNABL" class="form-control" onchange="getNABLValue(this)" disabled>
                        @if (Model.IsNABL == false)
                        {
                        <option value="false" selected>No</option>
                        <option value="true">Yes</option>
                        }
                        else if (Model.IsNABL == true)
                        {
                        <option value="true" selected>Yes</option>
                        <option value="false">No</option>
                        }
                        </select>
                        </div>
                        </div>*@
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Tentative Closing Date</label>
                                    <div class="input-group date" id="reservationdate7" data-target-input="nearest" onchange="$('#TentativeCompletionDate').attr('value',$('#TentativeCompletionDate').val());">
                                        <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate7"
                                               id="TentativeCompletionDate" name="TentativeCompletionDate" value="@Model.TentativeCompletionDate" disabled>
                                        <div class="input-group-append" data-target="#reservationdate7" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @if (Model.Status == 30 && (Model.TypeOfEquipment != "External" || Model.TypeOfEquipment != "外部の"))
                            {
                                <div class="col-sm-3" style="top: 35px;" id="AcceptSection">
                                    <!-- text input -->
                                    <div class="form-group">
                                        <label class="trn">Accept</label>
                                        @if (Model.Status == 27 || Model.Status == 29)
                                        {
                                            <input type="radio" name="NewAcceptReject" value="Accept" checked=true
                                                   onclick="NewReqEnableReason()" disabled>
                                        }
                                        else
                                        {
                                            <input type="radio" name="NewAcceptReject" value="Accept"
                                                   onclick="NewReqEnableReason()" disabled>
                                        }
                                    </div>
                                </div>
                                <div class="col-sm-3" style="top: 35px;" id="RejectSection">
                                    <div class="form-group">
                                        <label class="trn">Reject</label>

                                        @if (Model.Status == 28)
                                        {
                                            <input type="radio" name="NewAcceptReject" value="Reject" checked=true
                                                   onclick="NewReqEnableReason()" disabled>
                                        }
                                        else
                                        {
                                            <input type="radio" name="NewAcceptReject" value="Reject"
                                                   onclick="NewReqEnableReason()" disabled>
                                        }

                                    </div>
                                </div>
                            }
                        </div>
                    }
                    @if (Model.Status == 26 && (Model.TypeOfEquipment == "External" || Model.TypeOfEquipment == "外部の"))
                    {
                        <div id="ExternalRejectSection" style="display:none;">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="trn">External Reject Reason</label>
                                        <textarea id="Newreason" class="form-control" style="width: 100%;"></textarea>
                                    </div>
                                </div>
                                <div class="col-sm-6" style="text-align:right;">
                                    <!-- text input -->
                                    <div class="form-group">
                                        <input type="button" id="submitReasonNewRequest" value="Submit" name="Submit"
                                               class="btn btn-primary trn" onclick="AcceptRejectExternalRequest(language)">
                                        <a href='@Url.Action("Request","Tracker")'><input type="button" class="btn btn-default trn" value="Cancel"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    @if (Model.Status == 26 && (Model.TypeOfEquipment == "External" || Model.TypeOfEquipment == "外部の"))
                    {
                        <div id="ExternalAcceptSection" style="display:none;">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Calibration Frequency</label><br>
                                        <select id="CalibFreq" name="CalibFreq" class="form-control ExtCalFreq" style="width:100%; height:100%; padding:5px">
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="trn">External Accept Reason</label>
                                        <textarea id="Acceptreason" class="form-control" style="width: 100%;" value="@Model.ReasonforRejection"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label for="exampleInputFile" class="trn">Upload Image</label>
                                        <div class="input-group">
                                            <div class="custom-file">
                                                <input type="file" class="custom-file-input"
                                                       accept=" .doc,.docx,image/jpg,image/png,image/jpeg,application/pdf, application/vnd.ms-excel,application/vnd.ms-powerpoint,.ppt,.pptx,"
                                                       onchange="checkFileSize(this,MaxSize=4,event)" value="" name="ImageUpload"
                                                       id="ImageUpload" multiple />
                                                <label class="custom-file-label" for="exampleInputFile">Choose file</label>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="ManagerEmail" class="trn">Upload Image</label>
                                            <p id="SignImageName"></p>
                                            @*@if (@Model.SignImageName != null)
                                        {
                                        <a href='~/UserSignature/@Model.SignImageName' target="_blank">@Model.SignImageName</a>
                                        }*@
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="trn">Standard Refered/Calibration Method</label><br>
                                        <input id="StdReffer" class="form-control" style="width: 100%;" value="As Per External Calibration" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6" style="text-align:right;">
                                    <!-- text input -->
                                    <div class="form-group">
                                        <input type="button" id="submitReasonNewRequest" value="Submit" name="Submit"
                                               class="btn btn-primary trn" onclick="AcceptRejectExternalRequest(language)">
                                        <a href='@Url.Action("Request","Tracker")'><input type="button" class="btn btn-default trn" value="Cancel"></a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    }
                    @if ((Model.Status == 27 || Model.Status == 29) && (Model.TypeOfEquipment == "External" || Model.TypeOfEquipment == "外部の"))
                    {
                        <div id="ExternalAcceptSection">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="trn">External Accept Reason</label>
                                        <input id="Acceptreason" style="width: 100%;" value="@Model.AcceptReason" disabled>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="trn">Standard Refered/Calibration Method</label>
                                        <input id="Acceptreason" style="width: 100%;" value="@Model.StandardReffered" disabled>
                                    </div>
                                </div>
                            </div>
                            @if (Model.Status != 29 && (Model.TypeOfEquipment == "External" || Model.TypeOfEquipment == "外部の"))
                            {
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="exampleInputFile" class="trn">Upload Image</label>
                                            <div class="input-group">
                                                <div class="custom-file">
                                                    <input type="file" class="custom-file-input"
                                                           accept=" .doc,.docx,image/jpg,image/png,image/jpeg,application/pdf, application/vnd.ms-excel,application/vnd.ms-powerpoint,.ppt,.pptx,"
                                                           onchange="checkFileSize(this,MaxSize=4,event)" value="" name="ImageUpload"
                                                           id="ImageUpload" multiple disabled />
                                                    <label class="custom-file-label" for="exampleInputFile">Choose file</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="ManagerEmail" class="trn">Signature Image</label>
                                            <p id="SignImageName" name="Doc"></p>
                                            @if (@Model.SignImageName != null)
                                            {
                                                <a href='~/Instrument/@Model.SignImageName' target="_blank">@Model.SignImageName</a>
                                            }
                                        </div>
                                    </div>
                                </div>
                            }

                        </div>
                    }
                    @if (Model.Status == 26 && (Model.TypeOfEquipment == "Internal" || Model.TypeOfEquipment == "内部"))
                    {
                        <div id="NewReasonSection" style="display:none;">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="trn">Rejection Reason</label>
                                        <textarea id="Newreason" style="width: 100%;"></textarea>
                                    </div>
                                </div>
                                @*  <div class="col-sm-6" style="text-align:right;">
                            <!-- text input -->
                            <div class="form-group">
                            <input type="button" id="submitReasonNewRequest" value="Submit" name="Submit"
                            class="btn btn-primary trn" onclick="AcceptRejectNewRequest(language)">
                            <a href='@Url.Action("Request","Tracker")'><input type="button" class="btn btn-default trn" value="Cancel"></a>
                            </div>
                            </div> *@
                            </div>
                        </div>
                    }
                    @if (Model.Status == 26 && (Model.TypeOfEquipment == "Internal" || Model.TypeOfEquipment == "内部"))@*  && (Model.TypeOfRequest == 1) *@
                    {
                        <div id="NewacceptSection" style="display: none;">
                            @if (Model.TypeOfRequest == 1 || Model.TypeOfRequest == 3)
                            {
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label class="trn">Master Instrument Name</label><br>
                                            <select id="MasterInstrument" name="MasterInstrument" class="form-control" style="width:100%; height:100%; padding:5px">
                                                @*<option class="trn">-- Select Master abc--</option>*@
                                                @*@if(@ViewBag.MasterData!=null)
                                        {
                                        @foreach (var master in @ViewBag.MasterData)
                                        {
                                        <option value="@master.Id" class="trn">@master.EquipName</option>
                                        }
                                        }*@
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-2" style="top: 36px;"><input type="button" class="btn-primary" value="Add" onclick="AddNewInstrumentMaster(language)"></div>
                                    <div class="col-sm-6">
                                        <input type="hidden" id="MasterInstrument1" name="MasterInstrument1" value="">
                                        <input type="hidden" id="MasterInstrument2" name="MasterInstrument2" value="">
                                        <input type="hidden" id="MasterInstrument3" name="MasterInstrument3" value="">
                                        <input type="hidden" id="MasterInstrument4" name="MasterInstrument4" value="">

                                        <div id="masterEquipmentValue">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Standard Refered/Calibration Method</label><br>
                                            <input id="StdReffer" class="form-control" style="width: 100%;" value="@Model.StandardReffered">
                                        </div>
                                    </div>


                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Calibration Frequency</label><br>
                                            <select id="CalibFreq" name="CalibFreq" class="form-control" style="width:100%; height:100%; padding:5px">
                                                @* @foreach (var freq in @Model.CalibFreqList)
                                        {
                                        if (freq.Id == Model.CalibFreq)
                                        {
                                        <option value="@freq.Id" id="type" selected="selected">@freq.AttrValue</option>
                                        }
                                        else
                                        {
                                        <option value="@freq.Id">@freq.AttrValue</option>
                                        }
                                        }*@
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            }
                            @*  @if (Model.TypeOfRequest == 1 || Model.TypeOfRequest == 2 || Model.TypeOfRequest == 3)
                        { *@
                            <div class="row">
                                <div class="col-sm-6">
                                    <!-- text input -->
                                    <div class="form-group">
                                        <label class="trn">Observation Template</label><br>
                                        <select id="NewObservation" onchange="LoadObservationTypePopup(language)" class="form-control" style="width:100%; height:100%; padding:5px;position: absolute;">
                                            @* <option>-- Select Observation Template --</option>*@
                                            @*@foreach (var freq in @Model.ObservationTemplateList)
                                        {
                                        if (freq.Id == Model.ObservationTemplate)
                                        {
                                        <option value="@freq.Id" selected>@freq.AttrValue</option>
                                        }
                                        else
                                        {
                                        <option value="@freq.Id">@freq.AttrValue</option>
                                        }
                                        }*@
                                        </select>
                                    </div>
                                </div>
                                @* <div class="col-sm-6">
                            <!-- text input -->
                            <div class="form-group">
                            <label class="trn">Observation Template Type</label><br>
                            <select id="NewObservationType" class="form-control" style="width:100%; height:100%; padding:5px">
                            </select>
                            </div>
                            </div> *@

                            </div>
                            @* } *@
                            <div class="row">
                            </div>
                        </div>
                        <div class="col-sm-6" style="text-align:right;">
                            <!-- text input -->
                            <div class="form-group mt-4">
                                <input type="button" id="submitReasonNewRequest" value="Submit" name="Submit"
                                       class="btn btn-primary trn" onclick="AcceptRejectNewRequest(language)">
                                <a href='@Url.Action("Request","Tracker")'><input type="button" class="btn btn-default trn" value="Cancel"></a>
                            </div>
                        </div>

                    }


                    @if (Model.Status == 28 || Model.Status == 31)
                    {
                        <div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <!-- text input -->
                                    <div class="form-group">
                                        <label class="trn">Rejected On</label>
                                        <input type="text" class="form-control" id="NewrejectedOn" value="@Model.SubmittedOn.ToShortDateString()" disabled>
                                    </div>
                                </div>
                                @if (Model.Status == 28)
                                {
                                    <div class="col-sm-6">
                                        <!-- text input -->
                                        <div class="form-group">
                                            <label class="trn">Rejected Reason</label>
                                            <input type="text" class="form-control" id="NewrejectedReason" value="@Model.RejectReason" disabled>
                                        </div>
                                    </div>
                                }
                                @if (Model.Status == 31)
                                {
                                    <div class="col-sm-6">
                                        <!-- text input -->
                                        <div class="form-group">
                                            <label class="trn">Rejected Reason</label>
                                            <input type="text" class="form-control" id="NewrejectedReason" value="@Model.Result" disabled>
                                        </div>
                                    </div>
                                }
                            </div>
                            @if (Model.Status == 31 && (Model.TypeOfEquipment == "External" || Model.TypeOfEquipment == "外部の"))
                            {
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="ManagerEmail" class="trn">Signature Image</label>
                                            <p id="SignImageName"></p>
                                            @if (@Model.SignImageName != null)
                                            {
                                                <a href='~/Instrument/@Model.SignImageName' target="_blank">@Model.SignImageName</a>
                                            }
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    @if (Model.Status == 27 && (Model.TypeOfEquipment != "External" || Model.TypeOfEquipment != "外部の") && Model.AdminReviewStatus != 1)
                    {
                        <div id="newfmVisualCheckSection" style="display: block;">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Closed Date</label>
                                        <div class="input-group date" id="reservationdate2" data-target-input="nearest" onchange="$('#newClosedDate').attr('value',$('#newClosedDate').val());">
                                            <input type="text" id="newClosedDate" name="newClosedDate" value="@DateTime.Now"
                                                   class="form-control datetimepicker-input" data-target="#reservationdate2" disabled />
                                            <div class="input-group-append" data-target="#reservationdate2"
                                                 data-toggle="datetimepicker">
                                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Record By</label>
                                        <input type="text" class="form-control" id="RecordBy"
                                               value='@HttpContextAccessor.HttpContext.Session.GetString("FirstName")  @HttpContextAccessor.HttpContext.Session.GetString("LastName")'
                                               disabled>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    @if (Model.Status == 27 && Model.ReviewedStatus == 1)
                    {
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="exampleInputFile" class="trn">MU Template</label>
                                    <div class="input-group">
                                        <div class="custom-file">
                                            <input type="file" class="custom-file-input"
                                                   accept=" .doc,.docx,image/jpg,image/png,image/jpeg,application/pdf, application/vnd.ms-excel,application/vnd.ms-powerpoint,.ppt,.pptx,"
                                                   onchange="checkFileSize(this,MaxSize=4,event)" name="ImageUpload"
                                                   id="ImageUpload" multiple />
                                            <label class="custom-file-label" for="exampleInputFile">Choose file</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                            </div>
                            <div class="col-sm-6">
                                <div>
                                    <p id="FileList"></p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Calibration Date</label>
                                    <div class="input-group date" id="reservationdate4" data-target-input="nearest" onchange="$('#CalibDate').attr('value',$('#CalibDate').val());loaddate()  ">
                                        <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate4"
                                               id="CalibDate" name="CalibDate" onloadeddata="" value="" />
                                        <div class="input-group-append" data-target="#reservationdate4" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Due Date</label>
                                    <div class="input-group date" id="reservationdate5" data-target-input="nearest" onchange="$('#DueDate').attr('value',$('#DueDate').val());">
                                        <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate5"
                                               id="DueDate" name="DueDate" value="" />
                                        <div class="input-group-append" data-target="#reservationdate5" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Result</label>
                                    <select id="newResultLAB" class="form-control" onchange="ResultAcceptReject()">
                                        <option value="0">Select</option>
                                        <option value="Accepted">Accepted</option>
                                        <option value="Rejected">Rejected</option>
                                        <option value="Return without Calibration">Return without Calibration</option>
                                        <option value="Others">Others</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="trn">Remarks</label>
                                    <input type="text" class="form-control" id="newRemarks" value='@Model.Result'>
                                </div>
                            </div>
                        </div>

                        <div id="dvnewrequestclosedAccept" style="display:none;">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Instument Returned On</label>
                                        <div class="input-group date" id="reservationdate3" data-target-input="nearest" onchange="$('#newInstrumentReturnedDate').attr('value',$('#newInstrumentReturnedDate').val());">
                                            <input type="text" id="newInstrumentReturnedDate" name="newInstrumentReturnedDate" value="@DateTime.Now"
                                                   class="form-control datetimepicker-input" data-target="#reservationdate3" />
                                            <div class="input-group-append" data-target="#reservationdate3"
                                                 data-toggle="datetimepicker">
                                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Collected By</label>
                                        <input type="text" class="form-control" id="CollectedBy">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="dvnewrequestclosedReject" style="display:none;">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Reason for Rejection</label>
                                        <input type="text" class="form-control" id="newReasonRejection" value=''>
                                    </div>
                                </div>
                                @if (Model.TypeOfRequest == 2 || Model.TypeOfRequest == 3)
                                {
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Feasible to Service</label>
                                            <select id="newFeasibleService" class="form-control" onchange="showfeasibleservice()">
                                                <option value="0">Select</option>
                                                <option value="Yes">Yes</option>
                                                <option value="No">No</option>
                                            </select>
                                        </div>
                                    </div>
                                }
                            </div>
                            <div id="dvshowfeasibleserviceyes" style="display: none;">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">If Feasible service, Yes </label>
                                            <select id="newIsFeasibleService" class="form-control">
                                                <option value="Internal">Internal</option>
                                                <option value="External">External</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Service Responsibility</label>
                                            <input type="text" class="form-control" id="newServiceResponsibility" value=''>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="dvshowfeasibleserviceno" style=" display:none;">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Instument Returned On</label>
                                            <div class="input-group date" id="reservationdate3" data-target-input="nearest" onchange="$('#newInstrumentReturnedDate').attr('value',$('#newInstrumentReturnedDate').val());">
                                                <input type="text" id="newInstrumentReturnedDate" name="newInstrumentReturnedDate" value="@DateTime.Now"
                                                       class="form-control datetimepicker-input" data-target="#reservationdate3" />
                                                <div class="input-group-append" data-target="#reservationdate3"
                                                     data-toggle="datetimepicker">
                                                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Collected By</label>
                                            <input type="text" class="form-control" id="CollectedBy">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Remarks</label>
                                            <input type="text" class="form-control" id="newRejectionRemarks" value=''>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-9">
                                <!-- text input -->

                            </div>
                            <div class="col-sm-3">
                                <!-- text input -->
                                <div class="form-group">
                                    <input type="button" class="btn btn-primary trn" name="newSubmitFMVisual" id="newSubmitFMVisual"
                                           value="Submit" onclick="newSubmitReqLABVisual(language)">
                                    <a href='@Url.Action("Request","Tracker")'><input type="button" class="btn btn-default trn" value="Cancel"></a>
                                </div>
                            </div>
                        </div>
                    }
                    @* @if ((@HttpContextAccessor.HttpContext.Session.GetString("UserRoleId") == "2" || @HttpContextAccessor.HttpContext.Session.GetString("UserRoleId") == "3") && Model.Status == 27 && Model.ReviewedStatus != 1 && (Model.TypeOfEquipment != "External" || Model.TypeOfEquipment != "外部の") && Model.AdminReviewStatus != 1)
                    {
                    <div class="row">
                    <div class="col-sm-8 col-md-8 col-lg-8 col-xl-8">
                    <!-- text input -->

                    </div>
                    <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
                    <!-- text input -->
                    <div class="form-group">
                    <input type="button" class="btn btn-primary" name="newedit" id="newedit"
                    value="Edit" onclick="enableFields()">
                    <input type="button" class="btn btn-primary trn" name="newSubmitLABAdmin" disabled id="newSubmitLABAdmin"
                    value="Update" onclick="SaveLABAdminUpdates(language)">
                    <a href='@Url.Action("Request","Tracker")'><input type="button" class="btn btn-default trn" value="Cancel"></a>
                    </div>
                    </div>
                    </div>
                    } *@
                    @*  @if (Model.Status == 29 || Model.Status == 30 && (Model.TypeOfEquipment == "Internal Instrument" || Model.TypeOfEquipment == "内部計器")) *@
                    @if (Model.Status == 29 && (Model.TypeOfEquipment == "Internal" || Model.TypeOfEquipment == "内部"))
                    {
                        <div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Closed Date</label>
                                        <div class="input-group date" id="reservationdate2" data-target-input="nearest" onchange="$('#newClosedDate').attr('value',$('#newClosedDate').val());">
                                            <input type="text" id="newClosedDate" name="newClosedDate" value="@Model.ClosedDate.ToShortDateString()"
                                                   class="form-control datetimepicker-input" data-target="#reservationdate2" disabled />
                                            <div class="input-group-append" data-target="#reservationdate2"
                                                 data-toggle="datetimepicker">
                                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Record By</label>
                                        <input type="text" class="form-control" id="RecordBy"
                                               value="@Model.RecordBy"
                                               disabled>
                                    </div>
                                </div>
                            </div>
                            <div class="row">

                                <div class="col-sm-6">
                                    <div id="imageSection">
                                        @if (@Model.MUTemplateFileName != null)
                                        {
                                            <a href='~/MUTemplate/@Model.Id/@Model.MUTemplateFileName' target="_blank">@Model.MUTemplateFileName</a>
                                        }
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Calibration Date</label>
                                        <div class="input-group date" id="reservationdate4" data-target-input="nearest" onchange="$('#CalibDate').attr('value',$('#CalibDate').val());loaddate()  ">
                                            <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate4"
                                                   id="CalibDate" name="CalibDate" onloadeddata="" value="@Model.CalibDate" disabled />
                                            <div class="input-group-append" data-target="#reservationdate4" data-toggle="datetimepicker">
                                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Due Date</label>
                                        <div class="input-group date" id="reservationdate5" data-target-input="nearest" onchange="$('#DueDate').attr('value',$('#DueDate').val());">
                                            <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate5"
                                                   id="DueDate" name="DueDate" value="@Model.DueDate" disabled />
                                            <div class="input-group-append" data-target="#reservationdate5" data-toggle="datetimepicker">
                                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Result</label>
                                        <select id="newResultLAB" class="form-control" onchange="ResultAcceptReject()" disabled>
                                            <option value="0">Select</option>
                                            @if (Model.LabResult == "Approved")
                                            {
                                                <option value="Approved" selected=true>Accepted</option>
                                            }
                                            else
                                            {
                                                <option value="Approved">Accepted</option>
                                            }
                                            @if (Model.LabResult == "Rejected")
                                            {
                                                <option value="Rejected" selected=true>Rejected</option>
                                            }
                                            else
                                            {
                                                <option value="Rejected">Rejected</option>
                                            }
                                            @if (Model.LabResult == "Pass")
                                            {
                                                <option value="Pass" selected=true>Pass</option>
                                            }
                                            else
                                            {
                                                <option value="Pass">Pass</option>
                                            }
                                            @if (Model.LabResult == "Fail")
                                            {
                                                <option value="Fail" selected=true>Fail</option>
                                            }
                                            else
                                            {
                                                <option value="Fail">Fail</option>
                                            }
                                            @if (Model.LabResult == "Return without Calibration")
                                            {
                                                <option value="Return without Calibration" selected=true>Return without Calibration</option>
                                            }
                                            else
                                            {
                                                <option value="Return without Calibration">Return without Calibration</option>
                                            }
                                            @if (Model.LabResult == "Others")
                                            {
                                                <option value="Others" selected=true>Others</option>
                                            }
                                            else
                                            {
                                                <option value="Others">Others</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Remarks</label>
                                        <input type="text" class="form-control" id="newRemarks" value="@Model.Result" disabled>
                                    </div>
                                </div>
                            </div>

                            @if (Model.LabResult == "Accepted" || Model.LabResult == "Rejected")
                            {
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Instument Returned On</label>
                                            <div class="input-group date" id="reservationdate3" data-target-input="nearest" onchange="$('#newInstrumentReturnedDate').attr('value',$('#newInstrumentReturnedDate').val());">
                                                <input type="text" id="newInstrumentReturnedDate" name="newInstrumentReturnedDate" value="@Model.InstrumentReturnedOn.ToShortDateString()"
                                                       class="form-control datetimepicker-input" data-target="#reservationdate3" disabled />
                                                <div class="input-group-append" data-target="#reservationdate3"
                                                     data-toggle="datetimepicker">
                                                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Collected By</label>
                                            @if (Model.Status == 30)
                                            {
                                                <input type="text" class="form-control" id="CollectedBy" value="@Model.CollectedBy" disabled>
                                            }
                                            else
                                            {
                                                <input type="text" class="form-control" id="CollectedBy" value="@Model.CollectedBy">
                                            }
                                        </div>
                                    </div>
                                </div>
                            }
                            @if (Model.LabResult == "Rejected")
                            {
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="trn">Reason for Rejection</label>
                                            <input type="text" class="form-control" id="newReasonRejection" value="@Model.ReasonforRejection" disabled>
                                        </div>
                                    </div>
                                    @if (Model.TypeOfRequest == 2 || Model.TypeOfRequest == 3)
                                    {
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="trn">Feasible to Service</label>
                                                <select id="newFeasibleService" class="form-control" onchange="showfeasibleservice()" disabled>
                                                    <option value="0">Select</option>
                                                    @if (Model.IsFeasibleService == "Yes")
                                                    {
                                                        <option value="Yes" selected=true>Yes</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="Yes">Yes</option>
                                                    }
                                                    @if (Model.IsFeasibleService == "No")
                                                    {
                                                        <option value="No" selected=true>No</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="No">No</option>
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                    }
                                </div>
                                @if (Model.IsFeasibleService == "Yes")
                                {
                                    <div id="dvshowfeasibleserviceyes">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="trn">If Feasible service, Yes </label>
                                                    <select id="newIsFeasibleService" class="form-control" disabled>
                                                        @if (Model.IsFeasibleYes == "Internal")
                                                        {
                                                            <option value="Internal" selected>Internal</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="Internal">Internal</option>
                                                        }
                                                        @if (Model.IsFeasibleYes == "External")
                                                        {
                                                            <option value="External" selected>External</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="External">External</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="trn">Service Responsibility</label>
                                                    <input type="text" class="form-control" id="newServiceResponsibility" value="@Model.ServiceResponsibility">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                                <div id="dvshowfeasibleserviceno" style=" display:none;">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="trn">Instument Returned On</label>
                                                <div class="input-group date" id="reservationdate3" data-target-input="nearest" onchange="$('#newInstrumentReturnedDate').attr('value',$('#newInstrumentReturnedDate').val());">
                                                    <input type="text" id="newInstrumentReturnedDate" name="newInstrumentReturnedDate" value="@DateTime.Now"
                                                           class="form-control datetimepicker-input" data-target="#reservationdate3" disabled />
                                                    <div class="input-group-append" data-target="#reservationdate3"
                                                         data-toggle="datetimepicker">
                                                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="trn">Collected By</label>
                                                <input type="text" class="form-control" id="CollectedBy">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="trn">Remarks</label>
                                                <input type="text" class="form-control" id="newRejectionRemarks" value=''>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    @if ((Model.LabResult != "Rejected" && (Model.Status == 29 || Model.Status == 30)) && (Model.TypeOfEquipment == "Internal" || Model.TypeOfEquipment == "内部"))
                    {
                        <div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Return Date</label>

                                        <div class="input-group date" id="newReturnDatePicker" data-target-input="nearest" onchange="$('#newReturnDate').attr('value',$('#newReturnDate').val());">
                                            <input type="text" id="newReturnDate" name="newReturnDate" value="@DateTime.Now.AddHours(3).AddMinutes(30).ToString("yyyy/MM/dd HH:mm:ss") JST"
                                                   class="form-control datetimepicker-input" data-target="#newReturnDatePicker" />
                                            <div class="input-group-append" data-target="#newReturnDatePicker"
                                                 data-toggle="datetimepicker">
                                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <div class="form-group">
                                            <label class="trn">Result</label>
                                            <input type="text" class="form-control" id="newResultDEP" value="@Model.ResultDEP">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="trn">Instrument Id Number</label>
                                        @if ((Model.InstrumentIdNo != null) && (Model.TypeOfRequest == 2 || Model.TypeOfRequest == 3))
                                        {
                                            <input type="text" class="form-control" id="IdNo" value="@Model.InstrumentIdNo" disabled>
                                        }
                                        else
                                        {
                                            <input type="text" class="form-control" id="IdNo" value='@Model.InstrumentIdNo'>
                                        }
                                    </div>
                                </div>
                            </div>
                            @if ((Model.Status == 29) || ((Model.TypeOfRequest == 3) && (Model.InstrumentIdNo == null)))
                            {

                                <div class="row">
                                    <div class="col-sm-6">
                                    </div>
                                    <div class="col-sm-6">
                                        <!-- text input -->
                                        <div class="form-group" style="text-align:right;">
                                            <input style="margin-top: 32px;" type="button" class="btn btn-primary trn" name="newSubmitDEPVisual" id="newSubmitDEPVisual" value="Submit"
                                                   onclick="newSubmitReqDepVisual(language)">
                                            <a href='@Url.Action("Request","Tracker")'><input type="button" style="margin-top: 32px;" class="btn btn-default trn" value="Cancel"></a>
                                        </div>
                                    </div>
                                </div>

                            }
                        </div>
                    }
                    @if ((Model.Status == 29 || Model.Status == 30) && (Model.TypeOfEquipment == "External" || Model.TypeOfEquipment == "外部の"))
                    {
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="required trn">Instrument Id Number</label>
                                    @*<input type="text" id="txtIdNo" name="IdNo" value="@Model.InstrumentIdNo"
                                class="form-control" placeholder="" alt="Please fill this field">*@
                                    @if (Model.TypeOfRequest == 2 || Model.TypeOfRequest == 3)
                                    {
                                        <input type="text" class="form-control" id="txtIdNo" value="@Model.InstrumentIdNo" disabled>
                                    }
                                    else
                                    {
                                        <input type="text" class="form-control" id="txtIdNo" value='@Model.InstrumentIdNo'>
                                    }
                                    <label id="txtIdNoError" class="trn" style="color:red;display:none;">Please enter Instrument Id Number</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="ManagerEmail" class="trn">Signature Image</label>
                                    <p id="SignImageName"></p>
                                    @if (@Model.SignImageName != null)
                                    {
                                        <a href='~/Instrument/@Model.SignImageName' target="_blank">@Model.SignImageName</a>
                                    }
                                </div>
                            </div>
                        </div>

                        <br>
                        @if (Model.Status == 29)
                        {
                            <div class="row">
                                <div class="col-sm-6" style="text-align:right;">
                                    <!-- text input -->
                                    <div class="form-group">
                                        <input type="button" id="submitReasonNewRequest" value="Submit" name="Submit"
                                               class="btn btn-primary trn" onclick="SaveExternalObs(language)">
                                        <a href='@Url.Action("Request","Tracker")'><input type="button" class="btn btn-default trn" value="Cancel"></a>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                    @if ((Model.Status == 27 || Model.Status == 30) && (Model.TypeOfEquipment == "External" || Model.TypeOfEquipment == "外部の") && Model.AdminReviewStatus == 2)
                    {
                        <div id="ExternalRejectSection" style="display:block;">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="trn">External Reject Reason</label>
                                        <textarea id="Newreason" style="width: 100%;"></textarea>
                                    </div>
                                </div>
                                <div class="col-sm-6" style="text-align:right;">
                                    <!-- text input -->
                                    <div class="form-group">
                                        <input type="button" id="submitReasonNewRequest" value="Submit" name="Submit"
                                               class="btn btn-primary trn" onclick="ExternalCalibrationRequest(language)">
                                        <a href='@Url.Action("Request","Tracker")'><input type="button" class="btn btn-default trn" value="Cancel"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    @* @if (@HttpContextAccessor.HttpContext.Session.GetString("UserRoleId") != "4" &&  Model.Status==27)
                    {
                    <div class="row">
                    <div class="col-sm-6">
                    </div>
                    <div class="col-sm-6">
                    <!-- text input -->
                    <div class="form-group" style="text-align:right;">
                    <input style="margin-top: 32px;" type="button" class="btn btn-primary"
                    name="newSubmitDEPVisual" id="newSubmitDEPVisual" value="Submit"
                    onclick="newSubmitReqDepVisual()">
                    </div>
                    </div>
                    </div>
                    } *@
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


<script>

    var selectlang;
    $(function () {
        $('#CalibFreq').select2();
        $('#MasterInstrument').select2();
        $('#NewObservation').select2();
        $('#NewObservationType').select2();
        $('#NewCertification').select2();
        $('#NewObservationEd').select2();
        $('#NewObservationTypeEd').select2();
        $('#NewCertificationEd').select2();

        if (JSON.parse('@Html.Raw(Json.Serialize(@ViewBag.CalibFreqExternal))') != null) {
            var CalibFreqExternal = JSON.parse('@Html.Raw(Json.Serialize(@ViewBag.CalibFreqExternal))');
            console.log('******************************************CalibFreqExternal******************************************');
            console.log(CalibFreqExternal);
            //alert('3');
            //$('#CalibFreq').val(24).attr("selected", "selected");
            $("#CalibFreq").select2().val(CalibFreqExternal).trigger("change");
            //$('#CalibFreq').find('option[value=' + CalibFreqExternal + ']').prop("selected", "selected");
            //$('#CalibFreq option[value='+ CalibFreqExternal +']').attr("selected", "selected");
        }


    @*   if (JSON.parse('@Html.Raw(Json.Serialize(@ViewBag.ObservationType))') != null) {
            var ObservationTypeList = JSON.parse('@Html.Raw(Json.Serialize(@ViewBag.ObservationTypeList))');
            var ObservationType = JSON.parse('@Html.Raw(Json.Serialize(@ViewBag.ObservationType))');


            if (jQuery.inArray(item.id, ObservationType) == -1 && item.id == ObservationType) {
            $("#NewObservationTypeEd").append($("<option></option>").val(item.id).html(item.attrform));
            }
            });
            }
            else {
            $.each(ObservationTypeList, function (index, item) {
            if (jQuery.inArray(item.id, ObservationType) == -1 && item.id == ObservationType) {
            $("#NewObservationTypeEd").append($("<option></option>").val(item.id).html(item.attrformJp));
            }
            });
            }
            } *@
                });

    function enableFields() {
        document.getElementById("NewObservationEd").disabled = false;
        //document.getElementById("NewObservationTypeEd").disabled = false;
        //document.getElementById("NewMUEd").disabled = false;
        //document.getElementById("NewCertificationEd").disabled = false;
        document.getElementById("newSubmitLABAdmin").disabled = false;
    }
    function checkFileSize(element, maxSize, event) {
        var val = $(element).val(); //get file value
        var MAX_FILE_SIZE = 20 * 1024 * 1024; // 20MB
        var fileSize = ($(element)[0].files[0].size); //size in MB
        if (fileSize > MAX_FILE_SIZE) {
            alert("File Size Should Not Exceed More Than 20MB");// if Maxsize from Model > real file size alert this
            $("#ImageUpload").val("");
        }
        var input = document.getElementById('ImageUpload')
        var output = document.getElementById('SignImageName')
        var result = "";
        result += input.files.item(0).name;
        output.innerHTML = result;
    }
    @*</script>

        <script>*@
    @*var selectlang;*@
    @*$(document).ready(function () {

        $('#CalibFreq').select2();

        //selectlang = $('#hdnLanguage').val();
        console.log('language');
        console.log(selectlang);


        var ObservationTypeList = JSON.parse('@Html.Raw(Json.Serialize(@ViewBag.ObservationTypeList))');
        var ObservationType = JSON.parse('@Html.Raw(Json.Serialize(@ViewBag.ObservationType))');

        if ('@HttpContextAccessor.HttpContext.Session.GetString("Language")' == 'en') {
        $.each(ObservationTypeList, function (index, item) {

        if (jQuery.inArray(item.id, ObservationType) == -1 && item.id == ObservationType) {
        $("#NewObservationTypeEd").append($("<option></option>").val(item.id).html(item.attrform));
        }
        });
        }
        else {
        $.each(ObservationTypeList, function (index, item) {
        if (jQuery.inArray(item.id, ObservationType) == -1 && item.id == ObservationType) {
        $("#NewObservationTypeEd").append($("<option></option>").val(item.id).html(item.attrformJp));
        }
        });
        }
        });*@



    @*</script>
        <script>
        *@
        function getNABLValue(option) {
            document.getElementById("IsNABL").value = option.value;
        }
    function loaddate() {
        // debugger;
        var date1 = document.getElementById("CalibDate").value;
        var e = document.getElementById("CalibFreq");
        var type = e.options[e.selectedIndex].text;
        var datestr = (date1.split(" ")[0]).split("/");
        var newDate = new Date(datestr[2], datestr[1], datestr[0]);

        if (type == "One Month") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 1));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Two Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 2));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Three Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 3));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Four Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 4));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Five Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 5));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Six Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 6));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Seven Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 7));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Eight Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 8));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Nine Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 9));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Ten Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 10));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "Eleven Months") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth() + 11));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear();
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "1 Year") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth()));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear() + 1;
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "2 Years") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth()));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear() + 2;
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
        if (type == "3 Years") {
            var d = new Date(newDate);
            var newDate = new Date(d.setMonth(d.getMonth()));
            var day = newDate.getDate();
            var month = newDate.getMonth();
            if (month == 0) {
                month = 12
            }
            var year = newDate.getFullYear() + 3;
            var result3 = day + "/" + month + "/" + year;
            document.getElementById("DueDate").value = result3;
        }
    }

</script>

